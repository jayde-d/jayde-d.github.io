<!DOCTYPE html>
<html>
	<head>
	    <meta charset="utf-8" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
	</head>
	<body>
	<h1>Test Page</h1>
	
	<script>
		window.onload = function() {
		
		const { jsPDF } = window.jspdf;
		
		// Default export is a4 paper, portrait, using millimeters for units
		const doc = new jsPDF();

		doc.setDrawColor(128, 128, 128); // draw grey lines
		doc.setLineWidth(0.1);
		 
		doc.line(105, 20, 105, 74.25);
		doc.line(105, 222.75, 105, 277);
		
		// 0
		doc.line(20, 74.25, 190, 74.25);
		doc.line(20, 148.5, 190, 148.5);
		doc.line(20, 222.75, 190, 222.75);
		// 297
		
		doc.setLineDashPattern([2.5]);
		//doc.setLineWidth(0.5);
		//doc.line(105, 20, 105, 277);
		doc.line(105, 74.25, 105, 222.75);
		doc.rect(1, 1, 208, 295);

		//doc.text("Hello world!", 10, 10);
		
		doc.text("1", 100, 259.875, align = "center" , rotate = 0);
		doc.text("2", 110, 259.875, align = "center" , rotate = 180);
		doc.text("3", 110, 185.625, align = "center" , rotate = 180);
		doc.text("4", 110, 111.375, align = "center" , rotate = 180);
		doc.text("5", 110, 37.125, align = "center" , rotate = 180);
		doc.text("6", 100, 37.125, align = "center" , rotate = 0);
		doc.text("7", 100, 111.375, align = "center" , rotate = 0);
		doc.text("8", 100, 185.625, align = "center" , rotate = 0);
		
		var queryString = window.location.search;
		var urlParams = new URLSearchParams(queryString);
		
		var seed = urlParams.get("seed");
		var dir = urlParams.get("directory");
		var splitDir = dir.split("/");
		
		console.log(seed);
		console.log(dir)
		
		var DBOpenRequest = window.indexedDB.open(dir, 4);
		var db;
		
		DBOpenRequest.onsuccess = function(event) {
		console.log("SUCCESS!");
		db = DBOpenRequest.result;
		console.log(db);
		}
		doc.save("a4.pdf");

		}
	</script>
	</body>
</html>